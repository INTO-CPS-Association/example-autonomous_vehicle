<?xml version="1.0" encoding="UTF-8"?>
<Document>
 <Model version="4.6" build="4.6.3.7711">
  <Sidops><![CDATA[model 128 184
 description '<Information>
 <Description>
    <Version>4.6</Version>
<IsMainModel>0</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>C:\Users\Frederik\Dropbox (Agro Intelligence)\FFO\04_INTO_CPS\FMU\Vehicle\robotti_V3_hc.emx</LibraryPath>
  <TimeStamp>2017-10-17 16:11:51</TimeStamp>
</Description>
</Information>';
 type 'Mainmodel-1'
 end;
 implementation bg
  submodels
   animation 72 112.1
    description '<Description>
 <Version>4.0</Version>
 <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <TimeStamp>2007-11-1 22:32:1</TimeStamp>
 <AllowLibraryUpdate>False</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>ScriptFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type 'Submodel-Equation'
    end;
    implementation eq
parameters
	real global w;
	real global wfd;
	real global wrd;
	real global cg_a;
	real global cg_b;

variables
	real w_r;
	real w_l;
	real w_rear;
	real w_front;
	real l_a;
	real l_b;
	real animation_a;
	real offset_a;
	real animation_b;
	real offset_b;

equations
	w_l = -w/2;
	w_r = w/2;
	w_rear = w-wrd;
	w_front = w-wfd;
	l_a = cg_a;
	l_b = -cg_b;
	animation_b = 1.5*cg_b;
	offset_b = -animation_b/2;
	animation_a = 1.1*cg_a;
	offset_a = animation_a/2;
 implementation_end;
   controller 224 88
			specifications active 'test_internal'
				specification 'destecs_interface'
description '<Description>
 <Version>4.0</Version>
 <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <TimeStamp>2007-11-1 22:32:1</TimeStamp>
 <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
 type 'Submodel-Equation'
  ports
   signal out delta;
   signal out V_r;
   signal in GNSS_x_in;
   signal in GNSS_y_in;
   signal in GNSS_o_in;
   signal in GNSS_r_in;
 end;
 icon bg
  figures
   rectangle 194 66 254 110 color 0 fill 14013909;
   text 'name' 224 88 color 0;
  terminals
   delta 200 112 fixed;
   V_r 248 112 fixed;
   GNSS_x_in 256 96 fixed;
   GNSS_y_in 256 88 fixed;
   GNSS_o_in 256 80 fixed;
   GNSS_r_in 256 72 fixed;
 end;
 implementation eq
parameters
	real global V ('shared');               //Vehicle speed 3
externals
   real global import steering_wheel_angle;
	real global import sc;
	real global export GNSS_Position[4];
equations
	delta = steering_wheel_angle;
	if sc == 1 then
		V_r = V;
	else
		V_r = 0;
	end;

   GNSS_Position[1] = GNSS_x_in;
   GNSS_Position[2] = GNSS_y_in;
	GNSS_Position[3] = GNSS_o_in;
	GNSS_Position[4] = GNSS_r_in;
	 implementation_end;
specification_end;
				specification 'simple_tester'
description '<Description>
 <Version>4.0</Version>
 <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <TimeStamp>2007-11-1 22:32:1</TimeStamp>
 <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
 type 'Submodel-Equation'
  ports
   signal out delta;
   signal out V_r;
   signal in GNSS_x_in;
   signal in GNSS_y_in;
 end;
 icon bg
  figures
   rectangle 296 256 376 304 fill 9342520 dashed;
   text 'name' 336 280;
  terminals
   delta 296 288 fixed;
   V_r 312 304 fixed;
   GNSS_x_in 336 304 fixed;
   GNSS_y_in 336 304 fixed;
 end;
 implementation eq
parameters
	real amplitude = -0.5 {rad};
	real start_time = 2.0 {s};
	real global V ('shared');
variables
	boolean hidden change;
equations
	"calculate at least at the start time"
	change = timeevent (start_time);
	
	"calculate the step signal"
	delta = amplitude * 6* step (start_time);  
	V_r = V;implementation_end;
specification_end;
				specification 'test_internal'
 description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
 type 'Submodel-Equation'
  ports
   signal out delta_fl;
   signal out speed;
   signal in x;
   signal in y;
   signal in theta;
   signal out delta_fr;
 end;
 icon bg
  figures
   rectangle 194 66 254 110 color 0 fill 14013909;
   text 'name' 224 88 color 0;
  terminals
   delta_fl 200 112 fixed;
   speed 248 112 fixed;
 end;
 implementation eq
parameters
	real amplitude = 1.3;
	real vehicle_speed = 2;
variables
	real GNSS_Position[3];
	
equations
	if (time >= (starttime+3.0)) then
		delta_fr = amplitude;
		delta_fl = amplitude;
	else
		delta_fr = 0;
		delta_fl = 0;
	end;
	speed = vehicle_speed;
	
	GNSS_Position[1] = x;
	GNSS_Position[2] = y;
	GNSS_Position[3] = theta;
	implementation_end;
specification_end;
			end;
   globals_CT_Only1 80 56
			specifications active 'globals_Co_Sim'
				specification 'globals_Co_Sim'
 description '<Description>
 <Version>4.0</Version>
 <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <TimeStamp>2007-11-1 22:32:1</TimeStamp>
 <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
 type 'Submodel-Equation'
 end;
 icon bg
  figures
   rectangle 40 32 120 80 color 5855577 fill 13959039;
   text 'Globals_Co_Sim' 80 56 color 0 fill 13959039;
 end;
 implementation eq
parameters
	// Robot Design
	real global m = 680;
	real global cg_a = 0.95;
	real global cg_b = 0.55;
  
	real global T = 1.8;
   real global wrd = 0.22;
	real global wfd = 0.16;
   real global R_r = 0.24; // Rear wheel radius
   real global R_f = 0.19; // Front wheel radius

	real global C_af = 34377;
	real global C_ar = 42972;
	
	real global encoder_angle_resolution = 4096;
   real global encoder_speed_resolution = 1024;

// Robot initialisation
	real global initial_Position ('shared') [3] = [0, 0, 0]; // position, x,y in metres relative to the centre global cordinate system
   real global Look_ahead_dist ('shared') = 0.5 {m}; //
   real global V ('shared') = 1.0 {m/s}; // Vehicle speeed in the test
   real global Control_Parameters ('shared');
	real global dist_b ('shared') = 0.0;
	real global mu ('shared') = 0.55;
	

implementation_end;
specification_end;
				specification 'V2'
description '<Description>
 <Version>4.0</Version>
 <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <TimeStamp>2007-11-1 22:32:1</TimeStamp>
 <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
 type 'Submodel-Equation'
 end;
 icon bg
  figures
   rectangle 184 256 264 304 color 5855577 fill 13959039;
   text 'Globals_Co_Sim' 224 280 fill 13959039;
 end;
 implementation eq
parameters
	// Robot Design
	real global m = 275;
	real global a = 0.68;
	real global b = 0.5;
   real global gnss_x = 0;
   real global gnss_y = 0.5;
	real global I_zz = 95.7275;
   
	real global w = 0.74;
   real global wrd = 0.22;
	real global wfd = 0.16;
   real global R_r = 0.24; // Rear wheel radius
   real global R_f = 0.19; // Front wheel radius

	real global C_af = 22918;
	real global C_ar = 28648;

// Robot initialisation
	real global initial_Position ('shared') [3] = [0, 0, 0]; // UTM position, x,y in metres relative to the centre global cordinate system
   real global Look_ahead_dist ('shared') = 0.5 {m}; //
   real global V ('shared') = 4.0 {m/s}; // Vehicle speeed in the test
   real global Control_Parameters ('shared') [6];

implementation_end;
specification_end;
			end;
   vehicle 248 240
    description '<Information><Description><Version>4.6</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type vehicle
     ports
      signal in u_r;
      signal in delta_w;
      signal out x;
      signal out y;
      signal out theta;
      signal out r_a;
      signal out w_o;
      signal out delta_fl;
      signal out delta_fr;
      signal out delta_fl_s;
      signal out delta_fr_s;
      signal out delta_fl_o;
      signal out delta_fr_o;
      signal out w_l_p;
      signal out w_r_p;
      signal out w_l_s;
      signal out w_r_s;
      signal out w_r_o;
      signal out w_l_o;
      signal out delta_f;
    end;
    implementation bg
     submodels
      BicycleModel 448 456
						specifications active 'equation_version'
							specification 'default'
description '<Description>
 <Version>4.2</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type Submodel
  ports
   signal in delta_f;
   signal out d_x_v;
   signal out d_y_v;
   signal out r;
   signal in u_r;
 end;
 icon bg
  figures
   rectangle 27.2 160 100.8 192 fill 15132390;
   text 'name' 64 176;
  terminals
   u_r 104 160 fixed;
 end;
 implementation bg
  submodels
   F_f_y 464 160
    description '<Description>
 <LibraryPath>Bond Graph\MR.emx</LibraryPath>
 <Version>No Version Info</Version>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type MR
     ports
      power in p;
      signal in r;
      signal in delta;
    end;
    icon bg bottom
     figures
      text 'MR' 464 160 18 bold;
    end;
    implementation eq
parameters
real global C_af;
real global a;
real global V ('shared'); //Vehicle speed 1

equations
	p.e = -C_af * (((p.f+a*r)/V)-delta);implementation_end;
   F_r_y 56 264
    description '<Description>
 <LibraryPath>Bond Graph\MR.emx</LibraryPath>
 <Version>No Version Info</Version>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type MR
     ports
      power in p;
      signal in r;
    end;
    icon bg bottom
     figures
      text 'MR' 56 264 18 bold;
    end;
    implementation eq
parameters
real global C_ar;
real global V ('shared'); //Vehicle speed 2
real global b;
equations
	p.e = -C_ar*(((p.f-b*r)/V));
implementation_end;
   I_zz 160 160
    description '<Description>
 <LibraryPath>Bond Graph\I.emx</LibraryPath>
 <Version>No Version Info</Version>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type I
     ports
      power in p;
      signal out state;
     restrictions
      causality preferred in p;
    end;
    icon bg bottom
     figures
      text 'I' 160 160 18 bold;
    end;
    implementation eq
parameters
	real global I_zz;
equations
    state = int(p.e);
    p.f = state / I_zz;
implementation_end;
   m 296 272
    description '<Description>
 <LibraryPath>Bond Graph\I.emx</LibraryPath>
 <Version>No Version Info</Version>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type I
     ports
      power in p;
      signal out state;
     restrictions
      causality preferred in p;
    end;
    icon bg bottom
     figures
      text 'I' 296 272 18 bold;
    end;
    implementation eq
parameters
	real global m;
equations
    state = int(p.e);
    p.f = state / m;
implementation_end;
   m2 296 368
    description '<Description>
 <LibraryPath>Bond Graph\I.emx</LibraryPath>
 <Version>No Version Info</Version>
 <IsMainModel>0</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type I
     ports
      power in p;
      signal out state;
     restrictions
      causality preferred in p;
    end;
    icon bg bottom
     figures
      text 'I' 296 368 18 bold;
    end;
    implementation eq
parameters
	real global m;
equations
    state = int(p.e);
    p.f = state / m;
implementation_end;
   MGY 256 312
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MGY.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:03:53</TimeStamp>
</Description>
</Information>';
    type MGY
     ports
      power in p1;
      power out p2;
      signal in r;
     restrictions
      causality constraint equal p1 p2;
    end;
    icon bg
     figures
      text 'MGY' 256 312 18 bold;
    end;
    implementation eq
parameters
	real global m;
equations
	p1.e = (m*r) * p2.f;
	p2.e = (m*r) * p1.f;
implementation_end;
   MSf 256 216
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MSf.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:14:18</TimeStamp>
</Description>
</Information>';
    type MSf
     ports
      power out p;
      signal in flow;
     restrictions
      causality fixed in p;
    end;
    icon bg
     figures
      text 'MSf' 256 216 18 bold;
    end;
    implementation eq
variables
	real effort;
equations
	p.f = flow; 
	effort = p.e;
implementation_end;
   MTF 336 160
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MTF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:15:31</TimeStamp>
</Description>
</Information>';
    type MTF
     ports
      power in p1;
      power out p2;
      signal in r;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg
     figures
      text 'MTF' 336 160 18 bold;
    end;
    implementation eq
parameters
	real global a;
equations
		p1.e = a*cos(r) * p2.e;
		p2.f = a*cos(r) * p1.f;

implementation_end;
   MTF1 336 208
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MTF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:15:31</TimeStamp>
</Description>
</Information>';
    type MTF
     ports
      power in p1;
      power out p2;
      signal in r;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg
     figures
      text 'MTF' 336 208 18 bold;
    end;
    implementation eq
equations
	p1.e = -sin(r) * p2.e;
	p2.f = -sin(r) * p1.f;
implementation_end;
   MTF2 336 264
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\MTF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:15:31</TimeStamp>
</Description>
</Information>';
    type MTF
     ports
      power in p1;
      power out p2;
      signal in r;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg
     figures
      text 'MTF' 336 264 18 bold;
    end;
    implementation eq
equations
	p1.e = cos(r) * p2.e;
	p2.f = cos(r) * p1.f;
implementation_end;
   plug u_r 256 112;
   plug r 120 432;
   plug d_y_v 256 432;
   plug d_x_v 320 432;
   plug delta_f 368 112;
   OneJunction 256 368
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
    knot OneJunction
     ports
      power knot duplicatable none p [1];
      signal knot out flow [1];
     restrictions
      causality constraint one_out p;
    end;
    icon bg
     figures
      text '1' 256 368 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
   OneJunction1 256 272
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
    knot OneJunction
     ports
      power knot duplicatable none p [1];
      signal knot out flow [1];
     restrictions
      causality constraint one_out p;
    end;
    icon bg
     figures
      text '1' 256 272 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
   OneJunction2 208 160
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\OneJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:17:51</TimeStamp>
</Description>
</Information>';
    knot OneJunction
     ports
      power knot duplicatable none p [1];
      signal knot out flow [1];
     restrictions
      causality constraint one_out p;
    end;
    icon bg
     figures
      text '1' 208 160 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.e)) = 0;
	equal (collect (p.f));
	flow = first (p.f);
implementation_end;
   Splitter 368 128
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 364.8 124.8 371.2 131.2 color -1 fill 0;
      ellipse 363.7 123.7 372.3 132.3 color -1;
     terminals
      input 368 128 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Splitter1 120 312
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 116.8 308.8 123.2 315.2 color -1 fill 0;
      ellipse 115.7 307.7 124.3 316.3 color -1;
     terminals
      input 120 312 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Splitter2 208 136
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 204.8 132.8 211.2 139.2 color -1 fill 0;
      ellipse 203.7 131.7 212.3 140.3 color -1;
     terminals
      input 208 136 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   TF 176 208
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\TF.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:43:47</TimeStamp>
</Description>
</Information>';
    type TF
     ports
      power in p1;
      power out p2;
     restrictions
      causality constraint not_equal p1 p2;
    end;
    icon bg
     figures
      text 'TF' 176 208 18 bold;
    end;
    implementation eq
parameters
	real global b;
equations
	p1.e = -b * p2.e;
	p2.f = -b * p1.f;
implementation_end;
   ZeroJunction 416 160
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 416 160 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
   ZeroJunction1 144 264
    description '<Information>
 <Description>
    <Version>4.2</Version>
<IsMainModel>1</IsMainModel>
  <KeepParameterValues>False</KeepParameterValues>
    <LibraryPath>Bond Graph\ZeroJunction.emx</LibraryPath>
  <TimeStamp>2011-11-29 16:45:16</TimeStamp>
</Description>
</Information>';
    knot ZeroJunction
     ports
      power knot duplicatable none p [1];
      signal knot out effort [1];
     restrictions
      causality constraint one_in p;
    end;
    icon bg
     figures
      text '0' 144 264 18 bold;
    end;
    implementation eq
equations
	sum (direct (p.f)) = 0;
	equal (collect (p.e));
	effort = first (p.e);
implementation_end;
  end;
  connections
   ZeroJunction\p => MTF2\p1;
   MTF2\p2 => OneJunction\p;
   OneJunction\p => ZeroJunction1\p;
   MSf\p => OneJunction1\p;
   OneJunction1\p => m\p;
   OneJunction2\p => I_zz\p;
   ZeroJunction\p => F_f_y\p;
   ZeroJunction1\p => F_r_y\p;
   OneJunction\p => m2\p;
   TF\p2 => ZeroJunction1\p;
   OneJunction2\p => TF\p1;
   OneJunction2\p => MTF\p1;
   ZeroJunction\p <= MTF\p2;
   MGY\p1 <= OneJunction\p;
   MGY\p2 => OneJunction1\p;
   OneJunction1\p => MTF1\p1;
   MTF1\p2 => ZeroJunction\p;
   Splitter\output -> F_f_y\delta 472 128;
   Splitter1\output -> r;
   MSf\flow <- u_r;
   delta_f -> Splitter\input;
   Splitter2\output -> F_f_y\r 472 136;
   Splitter2\output -> F_r_y\r 56 136;
   OneJunction\flow -> d_y_v;
   Splitter1\output -> MGY\r;
   Splitter\output -> MTF\r 368 144;
   Splitter\output -> MTF1\r 368 208;
   OneJunction2\flow -> Splitter2\input;
   OneJunction1\flow -> d_x_v 320 336;
   Splitter\output -> MTF2\r 368 264;
   Splitter1\input <- Splitter2\output 120 136;
  end;
 implementation_end;
specification_end;
							specification 'equation_version'
 description '<Description>
 <Version>4.2</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type Submodel
  ports
   signal in delta_f;
   signal out d_x_v;
   signal out d_y_v;
   signal out r;
   signal in u_r;
 end;
 icon bg
  figures
   rectangle 411.2 440 484.8 472 color 0 fill 15132390;
   text 'name' 448 456 color 0;
  terminals
   delta_f 424 440 fixed;
   d_x_v 488 448 fixed;
   d_y_v 488 456 fixed;
   r 488 464 fixed;
   u_r 472 440 fixed;
 end;
 implementation bg
  submodels
   plug delta_f 368 112;
   plug d_x_v 320 432;
   plug d_y_v 256 432;
   plug r 120 432;
   plug u_r 160 112;
   vehicle_model 240 272
    description '<Description>
 <Version>4.0</Version>
 <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <TimeStamp>2007-11-1 22:32:1</TimeStamp>
 <AllowLibraryUpdate>False</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>ScriptFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type 'Submodel-Equation'
     ports
      signal in u_i;
      signal in delta_f_i;
      signal out r_o;
      signal out v_o;
      signal out u_o;
    end;
    implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/
parameters
real global dist_b ('shared');
real global mu ('shared');
real g = 9.8;
real global m;
real global cg_a;
real global cg_b;
real global C_af;
real global C_ar;

variables
	real a;
	real b;
	real global I_zz;
	real L;
   real W_r;
	real W_f;
				
	real f_y_f;
	real f_y_r;
	real h_s_f;
	real h_s_r;

	real d_r;
	real d_v;
	real alpha_f;
	real alpha_r;
   real v;
   real r;

	real F_y_f;					
	real F_y_r;

initialequations
	L = cg_a+cg_b;					// Wheel base
	a = L-(cg_b-dist_b);			// Distance from CG to front axel
	b = L-(cg_a+dist_b);			// Distance from CG to rear axel

	I_zz = (m/4)*((a+b)^2);		// Moment of inertia
  	W_f = (m*g)*(b/L);			// Weight on the front axel
	W_r = (m*g)*(a/L);			// Weight on the rear axel
	h_s_f = (W_f*mu)/2;
	h_s_r = (W_r*mu)/2;

equations 	// Caclulating the slip angles and tire forces
							
	if abs(u_i) > 0.025 then
		if(u_i > 0) then
   		alpha_f = ((v+a*r)/abs(u_i))-delta_f_i;	
		else
			alpha_f = ((v+a*r)/abs(u_i))+delta_f_i;
		end;
		alpha_r = ((v-b*r)/abs(u_i));
	else
		alpha_f = 0;
		alpha_r = 0;
	end;
	
	f_y_f = -C_af*tan(alpha_f);		// Normal load on the front
   f_y_r = -C_ar*tan(alpha_r);		// Normal load on the rear

	// Applying the nonlinear tire model on the front
	if abs(f_y_f) > h_s_f then
		F_y_f = -mu*W_f*sign(alpha_f)*(1-((mu*W_f)/(4*C_af*abs(tan(alpha_f)))));
   else
	// Applying the linear tire model
		F_y_f = f_y_f;
	end;
	// Applying the nonlinear tire model on the rear
	if abs(f_y_r) > h_s_r then
		F_y_r = -mu*W_r*sign(alpha_r)*(1-((mu*W_r)/(4*C_ar*abs(tan(alpha_r)))));
   else
	// Applying the linear tire model
		F_y_r = f_y_r;
	end;

   if abs(u_i) > 0.025 then
   	d_v = (-m*u_i*r+F_y_f+F_y_r)/m;		// Lateral acceleration
		d_r = (F_y_f*a-F_y_r*b)/I_zz;			// Yaw acceleration
   else
		d_v = 0;
		d_r = 0;
	end;
   

	v = int(d_v,0);								// forward velocity
	r = int(d_r,0);								// yaw rate

	v_o = v;
	r_o = r;
	u_o = u_i;implementation_end;
  end;
  connections
   delta_f -> vehicle_model\delta_f_i;
   vehicle_model\r_o -> r;
   vehicle_model\u_i <- u_r;
   vehicle_model\u_o -> d_x_v;
   vehicle_model\v_o -> d_y_v;
  end;
 implementation_end;
specification_end;
						end;
      motor 472.3 288
						specifications active 'testing'
							specification 'manual'
description '<Description>
 <Version>4.2</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type Submodel
  ports
   signal out delta_f;
   signal in delta_f_w;
 end;
 icon bg
  figures
   rectangle 187.2 328 260.8 360 fill 15132390;
   text 'name' 224 344;
  terminals
   delta_f 224 360 fixed;
   delta_f_w 224 328 fixed;
 end;
 implementation bg
  submodels
   Attenuate 240 24
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Attenuate.emx</LibraryPath>
  <TimeStamp>2007-10-31 13:47:6</TimeStamp>
</Description>';
    type Attenuate
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 224 8 256 40 fill 15132390;
      text 'K' 247.5 30.4 color 16711680 16 bold;
      text '1' 233.6 18.7 color 16711680 16 bold;
      line 233.6 34.7 247.5 15.5 color 16711680 width 2;
    end;
    implementation eq
parameters
	real K = 6;		// attenuation (divison parameter) 
equations
	output = input / K;
       implementation_end;
   LimitDelta1 320 24
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram Non-Linear\SignalLimiter-Limit.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:47:40</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type 'SignalLimiter-Limit'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 304 8 336 40 fill 15132390;
       line 319.9 12.5 319.9 37 fill 15132390;
       line 307 24.2 332.7 24.2 fill 15132390;
       spline 313.9 31.1 325.9 17.4 color 16711680 fill 15132390 width 2;
       spline 325.3 18.2 333.9 17.8 color 16711680 fill 15132390 width 2;
       spline 307 31.6 313.9 31.1 color 16711680 fill 15132390 width 2;
      end;
    end;
    implementation eq
parameters
	real maximum = 0.9599; // 45 degress
	real minimum = -0.9599; // -45 degress
equations
	output = limit (input, minimum, maximum);
  implementation_end;
   plug delta_f 440 24;
   plug delta_f_w 24 24;
  end;
  connections
   delta_f <- LimitDelta1\output;
   Attenuate\input <- delta_f_w;
   Attenuate\output -> LimitDelta1\input;
  end;
 implementation_end;
specification_end;
							specification 'motor_system'
description '<Description>
 <Version>4.2</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type Submodel
  ports
   signal out delta_f;
   signal in delta_f_w;
 end;
 icon bg
  figures
   rectangle 187.2 328 260.8 360 fill 15132390;
   text 'name' 224 344;
  terminals
   delta_f 224 360 fixed;
   delta_f_w 224 328 fixed;
 end;
 implementation bg
  submodels
   Attenuate 240 24
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Attenuate.emx</LibraryPath>
  <TimeStamp>2007-10-31 13:47:6</TimeStamp>
</Description>';
    type Attenuate
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 224 8 256 40 fill 15132390;
      text 'K' 247.5 30.4 color 16711680 16 bold;
      text '1' 233.6 18.7 color 16711680 16 bold;
      line 233.6 34.7 247.5 15.5 color 16711680 width 2;
    end;
    implementation eq
parameters
	real K = 6;		// attenuation (divison parameter) 
equations
	output = input / K;
       implementation_end;
   LimitDelta1 320 24
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram Non-Linear\SignalLimiter-Limit.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:47:40</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type 'SignalLimiter-Limit'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 304 8 336 40 fill 15132390;
       line 319.9 12.5 319.9 37 fill 15132390;
       line 307 24.2 332.7 24.2 fill 15132390;
       spline 313.9 31.1 325.9 17.4 color 16711680 fill 15132390 width 2;
       spline 325.3 18.2 333.9 17.8 color 16711680 fill 15132390 width 2;
       spline 307 31.6 313.9 31.1 color 16711680 fill 15132390 width 2;
      end;
    end;
    implementation eq
parameters
	real maximum = 0.9599; // 45 degress
	real minimum = -0.9599; // -45 degress
equations
	output = limit (input, minimum, maximum);
  implementation_end;
   LinearSystem2 128 24
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
  <LibraryPath>Signal\Transfer Functions\LinearSystem.emx</LibraryPath>
  <TimeStamp>2007-9-27 16:28:5</TimeStamp>
  <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>
';
    type LinearSystem
     ports
      signal in u;
      signal out y;
    end;
    icon bg bottom
     figures
      rectangle 104 7 152 41 fill 15132390;
      text '3.683' 128 15 color 8388608;
      text 's' 110 33;
      text '+' 120 33;
      text '3.67' 139 33 color 8388608;
      line 110 25 148 25 color 9211020;
    end;
    implementation eq
// 20-sim Linear System Editor
// tf
parameters
	real hidden A [1, 1] = -3.67;
	real hidden B [1, 1] = 3.683;
	real hidden C [1, 1] = 1;
	real hidden x0 [1] = 0;
variables
	real x [1];
equations
	ddt (x, x0) = A * x + B * u;
	y = C * x;
implementation_end;
   plug delta_f 440 24;
   plug delta_f_w 24 24;
  end;
  connections
   delta_f <- LimitDelta1\output;
   delta_f_w -> LinearSystem2\u;
   Attenuate\output -> LimitDelta1\input;
   LinearSystem2\y -> Attenuate\input;
  end;
 implementation_end;
specification_end;
							specification 'testing'
 description '<Information><Description><Version>4.2</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct><member><name>svgFilename</name><value><string></string></value></member></struct></value></member></struct></Configuration></Description></Information>';
 type w
  ports
   signal out u_r;
   signal in u_r_w;
   signal out w_o;
   signal in r_a;
   signal out w_l_o;
   signal out w_r_o;
   signal out w_l_p;
   signal out w_l_s;
   signal out w_r_p;
   signal out w_r_s;
 end;
 icon bg
  figures
   rectangle 433.5 272 511.2 304 color 0 fill 15132390;
   text 'name' 472 288 color 0;
  terminals
   u_r 472 304 fixed;
   u_r_w 472 272 fixed;
 end;
 implementation bg
  submodels
   Differentiate1 696 280
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Differentiate.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:9:46</TimeStamp>
</Description>';
    type 'Differentiate-Default'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 680 264 712 296 color 0 fill 15132390;
       text 'd/dt' 696 280 color 16711680 13 bold;
      end;
    end;
    implementation eq
parameters
	real initial = 0;		// initial value
equations
	output = ddt (input, initial);
    implementation_end;
   Differentiate2 688 80
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Differentiate.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:9:46</TimeStamp>
</Description>';
    type 'Differentiate-Default'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 672 64 704 96 color 0 fill 15132390;
       text 'd/dt' 688 80 color 16711680 13 bold;
      end;
    end;
    implementation eq
parameters
	real initial = 0;		// initial value
equations
	output = ddt (input, initial);
    implementation_end;
   encoder1 748 280
    description '<Information><Description><Version>4.1</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type Submodel
     ports
      signal out encoder_pos_output;
      signal out encoder_speed_output;
      signal in speed_input;
      signal in angle_input;
    end;
    icon bg top
     figures
      rectangle 736 264 752 296 color 3344914 fill 0;
      rectangle 752 272 760 288 color 0 fill 0;
     terminals
      encoder_pos_output 744 296 fixed;
    end;
    implementation bg
     submodels
      AngleToLinearDistance 160 192
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144.1 176 175.9 208 color 0 fill 15132390;
         text 'K' 160 192 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_angle_resolution;
equations
	output = input * encoder_angle_resolution / (2 * pi);
    implementation_end;
      AngleToLinearDistance1 160 360
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144.1 344 175.9 376 color 0 fill 15132390;
         text 'K' 160 360 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_angle_resolution;
equations
	output = input *(2 * pi)  / encoder_angle_resolution;
    implementation_end;
      AngleToLinearDistance2 272 192
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256.1 176 287.9 208 color 0 fill 15132390;
         text 'K' 272 192 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_speed_resolution;
equations
	output = input * encoder_speed_resolution / (2 * pi);
    implementation_end;
      AngleToLinearDistance3 272 360
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256.1 344 287.9 376 color 0 fill 15132390;
         text 'K' 272 360 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_speed_resolution;
equations
	output = input *(2 * pi)  / encoder_speed_resolution;
    implementation_end;
      plug encoder_pos_output 160 440;
      plug encoder_speed_output 272 440;
      plug speed_input 272 120.1;
      plug angle_input 160 120.1;
      Quantisize 160 272
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Discrete\Quantize-Round.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:18:34</TimeStamp>
</Description>';
       type 'Quantize-Round'
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144 256 176 288 color 0 fill 15132390;
         group
          line 170.3 262.1 170.3 265.1 color 16711680;
          line 170.3 265.1 166.8 265.1 color 16711680;
          line 166.8 265.1 166.8 267.9 color 16711680;
          line 166.8 267.9 163.3 267.9 color 16711680;
          line 163.3 267.9 163.3 270.8 color 16711680;
          line 163.3 270.8 159.7 270.8 color 16711680;
          line 159.7 270.8 159.7 273.7 color 16711680;
          line 159.7 273.7 156.2 273.7 color 16711680;
          line 156.2 273.7 156.2 276.6 color 16711680;
          line 156.2 276.6 152.6 276.6 color 16711680;
          line 152.6 276.6 152.6 279.5 color 16711680;
          line 152.6 279.5 149 279.5 color 16711680;
          line 149 282.3 149 279.5 color 16711680;
         end;
       end;
       implementation eq
parameters
	real lsb = 1;
variables
	real q, half_lsb;
equations
	half_lsb = lsb / 2;
	q = if input < 0.0 then 
		input - half_lsb
	else
		input + half_lsb
	end;
	output =  q - (q mod lsb);
    implementation_end;
      Quantisize1 272 272
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Discrete\Quantize-Round.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:18:34</TimeStamp>
</Description>';
       type 'Quantize-Round'
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256 256 288 288 color 0 fill 15132390;
         group
          line 282.3 262.1 282.3 265.1 color 16711680;
          line 282.3 265.1 278.8 265.1 color 16711680;
          line 278.8 265.1 278.8 267.9 color 16711680;
          line 278.8 267.9 275.3 267.9 color 16711680;
          line 275.3 267.9 275.3 270.8 color 16711680;
          line 275.3 270.8 271.7 270.8 color 16711680;
          line 271.7 270.8 271.7 273.7 color 16711680;
          line 271.7 273.7 268.2 273.7 color 16711680;
          line 268.2 273.7 268.2 276.6 color 16711680;
          line 268.2 276.6 264.6 276.6 color 16711680;
          line 264.6 276.6 264.6 279.5 color 16711680;
          line 264.6 279.5 261 279.5 color 16711680;
          line 261 282.3 261 279.5 color 16711680;
         end;
       end;
       implementation eq
parameters
	real lsb = 1;
variables
	real q, half_lsb;
equations
	half_lsb = lsb / 2;
	q = if input < 0.0 then 
		input - half_lsb
	else
		input + half_lsb
	end;
	output =  q - (q mod lsb);
    implementation_end;
     end;
     connections
      angle_input -> AngleToLinearDistance\input;
      AngleToLinearDistance\output -> Quantisize\input;
      AngleToLinearDistance1\output -> encoder_pos_output;
      AngleToLinearDistance2\output -> Quantisize1\input;
      AngleToLinearDistance3\output -> encoder_speed_output;
      Quantisize\output -> AngleToLinearDistance1\input;
      Quantisize1\output -> AngleToLinearDistance3\input;
      speed_input -> AngleToLinearDistance2\input;
     end;
    implementation_end;
   encoder2 740 80
    description '<Information><Description><Version>4.1</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type Submodel
     ports
      signal out encoder_pos_output;
      signal out encoder_speed_output;
      signal in speed_input;
      signal in angle_input;
    end;
    icon bg top
     figures
      rectangle 728 64 744 96 color 3344914 fill 0;
      rectangle 744 72 752 88 color 0 fill 0;
     terminals
      encoder_pos_output 736 96 fixed;
    end;
    implementation bg
     submodels
      AngleToLinearDistance 160 192
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144.1 176 175.9 208 color 0 fill 15132390;
         text 'K' 160 192 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_angle_resolution;
equations
	output = input * encoder_angle_resolution / (2 * pi);
    implementation_end;
      AngleToLinearDistance1 160 360
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144.1 344 175.9 376 color 0 fill 15132390;
         text 'K' 160 360 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_angle_resolution;
equations
	output = input *(2 * pi)  / encoder_angle_resolution;
    implementation_end;
      AngleToLinearDistance2 272 192
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256.1 176 287.9 208 color 0 fill 15132390;
         text 'K' 272 192 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_speed_resolution;
equations
	output = input * encoder_speed_resolution / (2 * pi);
    implementation_end;
      AngleToLinearDistance3 272 360
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256.1 344 287.9 376 color 0 fill 15132390;
         text 'K' 272 360 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_speed_resolution;
equations
	output = input *(2 * pi)  / encoder_speed_resolution;
    implementation_end;
      plug encoder_pos_output 160 440;
      plug encoder_speed_output 272 440;
      plug speed_input 272 120.1;
      plug angle_input 160 120.1;
      Quantisize 160 272
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Discrete\Quantize-Round.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:18:34</TimeStamp>
</Description>';
       type 'Quantize-Round'
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144 256 176 288 color 0 fill 15132390;
         group
          line 170.3 262.1 170.3 265.1 color 16711680;
          line 170.3 265.1 166.8 265.1 color 16711680;
          line 166.8 265.1 166.8 267.9 color 16711680;
          line 166.8 267.9 163.3 267.9 color 16711680;
          line 163.3 267.9 163.3 270.8 color 16711680;
          line 163.3 270.8 159.7 270.8 color 16711680;
          line 159.7 270.8 159.7 273.7 color 16711680;
          line 159.7 273.7 156.2 273.7 color 16711680;
          line 156.2 273.7 156.2 276.6 color 16711680;
          line 156.2 276.6 152.6 276.6 color 16711680;
          line 152.6 276.6 152.6 279.5 color 16711680;
          line 152.6 279.5 149 279.5 color 16711680;
          line 149 282.3 149 279.5 color 16711680;
         end;
       end;
       implementation eq
parameters
	real lsb = 1;
variables
	real q, half_lsb;
equations
	half_lsb = lsb / 2;
	q = if input < 0.0 then 
		input - half_lsb
	else
		input + half_lsb
	end;
	output =  q - (q mod lsb);
    implementation_end;
      Quantisize1 272 272
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Discrete\Quantize-Round.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:18:34</TimeStamp>
</Description>';
       type 'Quantize-Round'
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256 256 288 288 color 0 fill 15132390;
         group
          line 282.3 262.1 282.3 265.1 color 16711680;
          line 282.3 265.1 278.8 265.1 color 16711680;
          line 278.8 265.1 278.8 267.9 color 16711680;
          line 278.8 267.9 275.3 267.9 color 16711680;
          line 275.3 267.9 275.3 270.8 color 16711680;
          line 275.3 270.8 271.7 270.8 color 16711680;
          line 271.7 270.8 271.7 273.7 color 16711680;
          line 271.7 273.7 268.2 273.7 color 16711680;
          line 268.2 273.7 268.2 276.6 color 16711680;
          line 268.2 276.6 264.6 276.6 color 16711680;
          line 264.6 276.6 264.6 279.5 color 16711680;
          line 264.6 279.5 261 279.5 color 16711680;
          line 261 282.3 261 279.5 color 16711680;
         end;
       end;
       implementation eq
parameters
	real lsb = 1;
variables
	real q, half_lsb;
equations
	half_lsb = lsb / 2;
	q = if input < 0.0 then 
		input - half_lsb
	else
		input + half_lsb
	end;
	output =  q - (q mod lsb);
    implementation_end;
     end;
     connections
      angle_input -> AngleToLinearDistance\input;
      AngleToLinearDistance\output -> Quantisize\input;
      AngleToLinearDistance1\output -> encoder_pos_output;
      AngleToLinearDistance2\output -> Quantisize1\input;
      AngleToLinearDistance3\output -> encoder_speed_output;
      Quantisize\output -> AngleToLinearDistance1\input;
      Quantisize1\output -> AngleToLinearDistance3\input;
      speed_input -> AngleToLinearDistance2\input;
     end;
    implementation_end;
   Gain 152 24
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:15:12</TimeStamp>
</Description>';
    type Gain
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 136.1 8 167.9 40 color 0 fill 15132390;
      text 'K' 152 24 color 16711680 16 bold;
    end;
    implementation eq
parameters
	real K = 0.29;		// gain
equations
	output = K * input;
    implementation_end;
   Limit 392 24
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram Non-Linear\SignalLimiter-Limit.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:47:40</TimeStamp>
</Description>';
    type 'SignalLimiter-Limit'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 376 8 408 40 color 0 fill 15132390;
       line 391.9 12.5 391.9 37 color 0 fill 15132390;
       line 379 24.2 404.7 24.2 color 0 fill 15132390;
       spline 385.9 31.1 397.9 17.4 color 16711680 fill 15132390 width 2;
       spline 397.3 18.2 405.9 17.8 color 16711680 fill 15132390 width 2;
       spline 379 31.6 385.9 31.1 color 16711680 fill 15132390 width 2;
      end;
    end;
    implementation eq
parameters
	real maximum = 3.2;
	real minimum = -3;
equations
	output = limit (input, minimum, maximum);
  implementation_end;
   plug w_r_o 848 232;
   plug w_l_p 824 96;
   plug w_r_p 848 296;
   plug w_r_s 848 280;
   plug w_l_o 840 128;
   plug u_r 551.9 24;
   plug r_a 608 72;
   plug w_o 448 280;
   plug u_r_w 24 24;
   plug w_l_s 824 80;
   Splitter 448 24
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 444.8 20.8 451.2 27.2 color -1 fill 0;
      ellipse 443.7 19.7 452.3 28.3 color -1;
     terminals
      input 448 24 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Splitter2 448 176
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 444.8 172.8 451.2 179.2 color -1 fill 0;
      ellipse 443.7 171.7 452.3 180.3 color -1;
     terminals
      input 448 176 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Splitter3 688 128
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 684.8 124.8 691.2 131.2 color -1 fill 0;
      ellipse 683.7 123.7 692.3 132.3 color -1;
     terminals
      input 688 128 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Splitter4 696 232
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 692.8 228.8 699.2 235.2 color -1 fill 0;
      ellipse 691.7 227.7 700.3 236.3 color -1;
     terminals
      input 696 232 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Submodel2 607.9 176
    description '<Description><Version>4.0</Version>
   <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
   <TimeStamp>2007-11-1 22:32:1</TimeStamp>
   <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>';
    type 'differential-Equation'
     ports
      signal in r_a;
      signal in w_i;
      signal out w_l_o;
      signal out w_r_o;
    end;
    implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/
equations
w_l_o = w_i;
w_r_o = w_i;implementation_end;
   TransferFunction 312 24
			specifications active 'FO'
				specification 'FO'
 description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 288 7.4 336 40.6 color 0 fill 15132390;
   text 'k' 313.1 15.1 color 16711680 14;
   line 293.7 25 331.4 25 color 16711680 fill 15132390;
   text 't' 306.7 31.7 color 16711680 'SymbolProp BT' 15;
   text 's    + 1' 312 31.7 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;		// gain []
    real tau = 0.3;		// time constant [s / rad]
variables
    real rate, state;
equations
    rate = (k * input - state) / tau;
    state = int(rate);
    output = state;                    implementation_end;
specification_end;
				specification 'FOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96 216 128 fill 15132390;
   group
    text 't' 176.5 118.8 color 16711680 'SymbolProp BT' 15;
    text 's    + 1' 184 118.8 color 16711680 14;
   end;
   line 155.5 114 210.9 114 color 16711680 fill 15132390;
   group
    text 'L' 187.2 108.2 color 16711680 11;
    text 't' 181.3 105 color 16711680 'SymbolProp BT' 15;
   end;
   text 'k' 160.5 105.5 color 16711680 14;
   text '(s    + 1)' 188.8 105 color 16711680 14;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lead time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tau );
	output = state + ( tauL/tau ) * rate;  implementation_end;
specification_end;
				specification 'FOLA'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96.5 216 128.5 fill 15132390;
   line 156.6 113.5 211.9 113.5 color 16711680 fill 15132390;
   group
    text 'k' 160.5 105 color 16711680 14;
    text '(s    + 1)' 187.7 104.4 color 16711680 14;
    text 't' 180.3 104.4 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text 's    + 1' 182.4 119.4 color 16711680 14;
    text 't' 173.9 119.4 color 16711680 'SymbolProp BT' 15;
    text 'L' 179.7 122.6 color 16711680 11;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lag time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tauL );
	output = state + ( tau/tauL ) * rate;  implementation_end;
specification_end;
				specification 'SOI'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 160 97 208 128 fill 15132390;
   text 'k' 187.2 104 color 16711680 14;
   line 163.2 112.5 202.7 112.5 color 16711680 fill 15132390;
   group
    text 's(s  + 1)' 184 118.4 color 16711680 14;
    text 't' 181.9 118.4 color 16711680 'SymbolProp BT' 15;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
 	real tau = 1;		// time constant [s / rad]
variables
    real hidden rate1, state1;
    real rate2,state2;
equations
	rate1 = ( k * input );
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau;
	state2 = int(rate2);
	output = state2;                        implementation_end;
specification_end;
				specification 'SOO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.6 232 128.6 fill 15132390;
   group
    text 't' 198.4 117.9 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.1 color 16711680 11;
   end;
   group
    text 't' 153.6 117.9 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.1 color 16711680 11;
   end;
   line 140.8 112.1 226.1 112.1 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 117.9 color 16711680 14;
   text '(s    + 1)' 205.9 117.9 color 16711680 14;
   text 'k' 183.5 103.3 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s / rad]
	real tau2 = 1;		// time constant 2 [s / rad]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state1) / tau1;
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau2;
	state2 = int(rate2);
	output = state2;                         implementation_end;
specification_end;
				specification 'SOOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 97.3 232 129.3 fill 15132390;
   group
    text 't' 198.4 118.1 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.3 color 16711680 11;
   end;
   group
    text 't' 153.6 118.1 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.2 color 16711680 11;
   end;
   text 'k' 159.5 103.7 color 16711680 14;
   line 140.8 112.2 226.1 112.2 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 118.1 color 16711680 14;
   text '(s    + 1)' 205.9 118.1 color 16711680 14;
   group
    text '(s    + 1)' 187.7 103.7 color 16711680 14;
    text 't' 180.3 103.7 color 16711680 'SymbolProp BT' 15;
    text 'L' 185.1 106.9 color 16711680 11;
   end;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s ]
	real tau2 = 1;		// time constant 2 [s ]
	real tauL = 2;		// lead time [s]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = state2/k - input;
	state1 = int (rate1);
	rate2 = k/(tau1*tau2) * ( tauL*input - state1 - state2*(tau1+tau2)/k );
	state2 = int(rate2);
	output = state2;             implementation_end;
specification_end;
				specification 'SOU'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2011-3-23 10:32:13</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 200 511.7 296 543.7 fill 15132390;
   line 204.8 527.2 290.1 527.2 color 16711680 fill 15132390;
   text 's  + 2     s  + 1' 254.3 535.7 color 16711680 14;
   text 'z' 251.4 536.8 color 16711680 'SymbolProp BT' 11 symbol;
   text '2' 216.4 532 color 16711680 11;
   text 't' 210 535.7 color 16711680 'SymbolProp BT' 15;
   text 't' 258.5 535.7 color 16711680 'SymbolProp BT' 15;
   text 'k' 248.4 519.2 color 16711680 14;
   text '2' 228.4 532 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1;			// gain []
    	real tau = 1;		// time constant [s ]
	real zeta = 0.7;		// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2) / tau;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)/tau;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
				specification 'SOUO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.1 232 128.1 fill 15132390;
   line 139.2 112.4 227.2 112.4 color 16711680 fill 15132390;
   text 's  + 2      s  + ' 176 120.1 color 16711680 14;
   text 'z' 172.3 121.2 color 16711680 'SymbolProp BT' 11 symbol;
   text 'w' 181.3 120.1 color 16711680 'SymbolProp BT' 15;
   text 'k' 176.5 103.6 color 16711680 14;
   group
    text '2' 194.7 101.2 color 16711680 11;
    text 'w' 186.7 103.9 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text '2' 225.6 116.7 color 16711680 11;
    text 'w' 217.6 119.4 color 16711680 'SymbolProp BT' 15;
   end;
   text '2' 149.3 116.2 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1.0;			// gain []
	real omega = 1.0;		// frequency [rad/s]
	real zeta = 0.7;			// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2)*omega;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)*omega;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
			end;
   wheel 448.1 95.3
    description '<Information><Description><Version>4.0</Version><LibraryPath>Template\Submodel-Equation.emx</LibraryPath><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><TimeStamp>2007-11-1 22:32:1</TimeStamp><AllowLibraryUpdate>False</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type 'Submodel-Equation'
     ports
      signal in input;
      signal out output;
    end;
    implementation eq
parameters
   real R = 0.29;
	real initial = 0;		// initial value
variables
 real w_r;
equations
  // start typing here
  w_r = input/R;
  output = int (w_r, initial);

	implementation_end;
  end;
  connections
   Differentiate1\output -> encoder1\speed_input;
   Differentiate2\output -> encoder2\speed_input;
   encoder1\encoder_pos_output -> w_r_p;
   encoder1\encoder_speed_output -> w_r_s;
   encoder2\encoder_pos_output -> w_l_p;
   encoder2\encoder_speed_output -> w_l_s;
   Gain\output -> TransferFunction\input;
   r_a -> Submodel2\r_a;
   Splitter\input <- Limit\output;
   Splitter\output -> u_r;
   Splitter\output -> wheel\input;
   Splitter2\input <- wheel\output;
   Splitter2\output -> Submodel2\w_i;
   Splitter3\output -> Differentiate2\input;
   Splitter3\output -> encoder2\angle_input;
   Splitter3\output -> w_l_o;
   Splitter4\output -> Differentiate1\input;
   Splitter4\output -> encoder1\angle_input;
   Splitter4\output -> w_r_o;
   Submodel2\w_l_o -> Splitter3\input 664 128;
   Submodel2\w_r_o -> Splitter4\input 672 232;
   TransferFunction\output -> Limit\input;
   u_r_w -> Gain\input;
   w_o <- Splitter2\output;
  end;
 implementation_end;
specification_end;
						end;
      plug x 752 448.1;
      plug y 752 456;
      plug theta 760 464;
      plug r_a 752 344;
      plug w_o 504 216;
      plug delta_fl 296 360;
      plug delta_fr 296 392;
      plug delta_fl_s 296 376;
      plug delta_w 392 208;
      plug delta_fl_o 296 328;
      plug delta_fr_o 296 312;
      plug w_l_p 552 224;
      plug w_r_p 616 224;
      plug w_l_s 584 224;
      plug w_r_s 648 224;
      plug w_r_o 744 224;
      plug w_l_o 696 224;
      plug delta_f 304 424;
      plug delta_fr_s 296 408;
      plug u_r 472 216;
      PosCalc 624 457
       description '<Description>
 <Version>4.0</Version>
 <LibraryPath>Template\Submodel-Equation.emx</LibraryPath>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <TimeStamp>2007-11-1 22:32:1</TimeStamp>
 <AllowLibraryUpdate>False</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
       type 'Submodel-Equation'
        ports
         signal in Vx;
         signal in Vy;
         signal in r;
         signal out x;
         signal out y;
         signal out theta;
         signal out r_a;
       end;
       icon bg
        figures
         rectangle 586.3 440.6 661.7 473.4 color 0 fill 15132390;
         text 'name' 624 457 color 0 bold;
        terminals
         Vx 584 448 fixed;
         Vy 584 456 fixed;
         r 584 464 fixed;
         x 664 449 fixed;
         y 664 457 fixed;
         theta 664 465 fixed;
         r_a 624 441 fixed;
       end;
       implementation eq
/* Equation Submodel
Enter you equations here. You can use the Toolbar buttons at the left ( Add , f(x) etc. ).
*/
parameters
real gnss_x = 1.2;
real gnss_y = 0.0;
variables
	real v_x;
	real v_y;
	real temp_theta;
	real P_1[2,1];
	real P_GNSS[2,1];
	real R[2,2];
	real temp_x;
	real temp_y;
initialequations
	P_1 = [gnss_x; gnss_y];
	
equations
  temp_theta = int(r_a,0);
  theta = atan2(sin(temp_theta),cos(temp_theta));		// Calculates the orientation
  v_x = Vx*cos(theta)-Vy*sin(theta);						// Calculates the velocity components in global frame
  v_y = Vx*sin(theta)+Vy*cos(theta);						
  x = int(v_x,0);													// position in x
  y = int(v_y,0);													// position in y
  r_a = r;														
  R = [cos(theta), sin(theta); -sin(theta), cos(theta)];
  P_GNSS = transpose(R) * P_1;
  temp_x = x + P_GNSS[1];
  temp_y = y + P_GNSS[2];implementation_end;
      pvg_actuator 392 288
						specifications active 'testing'
							specification 'manual'
description '<Description>
 <Version>4.2</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type Submodel
  ports
   signal out delta_f;
   signal in delta_f_w;
 end;
 icon bg
  figures
   rectangle 187.2 328 260.8 360 fill 15132390;
   text 'name' 224 344;
  terminals
   delta_f 224 360 fixed;
   delta_f_w 224 328 fixed;
 end;
 implementation bg
  submodels
   Attenuate 240 24
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Attenuate.emx</LibraryPath>
  <TimeStamp>2007-10-31 13:47:6</TimeStamp>
</Description>';
    type Attenuate
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 224 8 256 40 fill 15132390;
      text 'K' 247.5 30.4 color 16711680 16 bold;
      text '1' 233.6 18.7 color 16711680 16 bold;
      line 233.6 34.7 247.5 15.5 color 16711680 width 2;
    end;
    implementation eq
parameters
	real K = 6;		// attenuation (divison parameter) 
equations
	output = input / K;
       implementation_end;
   LimitDelta1 320 24
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram Non-Linear\SignalLimiter-Limit.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:47:40</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type 'SignalLimiter-Limit'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 304 8 336 40 fill 15132390;
       line 319.9 12.5 319.9 37 fill 15132390;
       line 307 24.2 332.7 24.2 fill 15132390;
       spline 313.9 31.1 325.9 17.4 color 16711680 fill 15132390 width 2;
       spline 325.3 18.2 333.9 17.8 color 16711680 fill 15132390 width 2;
       spline 307 31.6 313.9 31.1 color 16711680 fill 15132390 width 2;
      end;
    end;
    implementation eq
parameters
	real maximum = 0.9599; // 45 degress
	real minimum = -0.9599; // -45 degress
equations
	output = limit (input, minimum, maximum);
  implementation_end;
   plug delta_f 440 24;
   plug delta_f_w 24 24;
  end;
  connections
   delta_f <- LimitDelta1\output;
   Attenuate\input <- delta_f_w;
   Attenuate\output -> LimitDelta1\input;
  end;
 implementation_end;
specification_end;
							specification 'motor_system'
description '<Description>
 <Version>4.2</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
 type Submodel
  ports
   signal out delta_f;
   signal in delta_f_w;
 end;
 icon bg
  figures
   rectangle 187.2 328 260.8 360 fill 15132390;
   text 'name' 224 344;
  terminals
   delta_f 224 360 fixed;
   delta_f_w 224 328 fixed;
 end;
 implementation bg
  submodels
   Attenuate 240 24
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Attenuate.emx</LibraryPath>
  <TimeStamp>2007-10-31 13:47:6</TimeStamp>
</Description>';
    type Attenuate
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      rectangle 224 8 256 40 fill 15132390;
      text 'K' 247.5 30.4 color 16711680 16 bold;
      text '1' 233.6 18.7 color 16711680 16 bold;
      line 233.6 34.7 247.5 15.5 color 16711680 width 2;
    end;
    implementation eq
parameters
	real K = 6;		// attenuation (divison parameter) 
equations
	output = input / K;
       implementation_end;
   LimitDelta1 320 24
    description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram Non-Linear\SignalLimiter-Limit.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:47:40</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
   <Configuration><struct>
  <member>
    <name>DocumentationMask</name>
    <value>
      <struct>
        <member>
          <name>MaskChoice</name>
          <value>
            <int>1</int>
          </value>
        </member>
        <member>
          <name>BitmapFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>svgFilename</name>
          <value>
            <string></string>
          </value>
        </member>
        <member>
          <name>Scaling</name>
          <value>
            <double>1</double>
          </value>
        </member>
      </struct>
    </value>
  </member>
</struct>
</Configuration>
</Description>';
    type 'SignalLimiter-Limit'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 304 8 336 40 fill 15132390;
       line 319.9 12.5 319.9 37 fill 15132390;
       line 307 24.2 332.7 24.2 fill 15132390;
       spline 313.9 31.1 325.9 17.4 color 16711680 fill 15132390 width 2;
       spline 325.3 18.2 333.9 17.8 color 16711680 fill 15132390 width 2;
       spline 307 31.6 313.9 31.1 color 16711680 fill 15132390 width 2;
      end;
    end;
    implementation eq
parameters
	real maximum = 0.9599; // 45 degress
	real minimum = -0.9599; // -45 degress
equations
	output = limit (input, minimum, maximum);
  implementation_end;
   LinearSystem2 128 24
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
  <LibraryPath>Signal\Transfer Functions\LinearSystem.emx</LibraryPath>
  <TimeStamp>2007-9-27 16:28:5</TimeStamp>
  <AllowLibraryUpdate>False</AllowLibraryUpdate>
</Description>
';
    type LinearSystem
     ports
      signal in u;
      signal out y;
    end;
    icon bg bottom
     figures
      rectangle 104 7 152 41 fill 15132390;
      text '3.683' 128 15 color 8388608;
      text 's' 110 33;
      text '+' 120 33;
      text '3.67' 139 33 color 8388608;
      line 110 25 148 25 color 9211020;
    end;
    implementation eq
// 20-sim Linear System Editor
// tf
parameters
	real hidden A [1, 1] = -3.67;
	real hidden B [1, 1] = 3.683;
	real hidden C [1, 1] = 1;
	real hidden x0 [1] = 0;
variables
	real x [1];
equations
	ddt (x, x0) = A * x + B * u;
	y = C * x;
implementation_end;
   plug delta_f 440 24;
   plug delta_f_w 24 24;
  end;
  connections
   delta_f <- LimitDelta1\output;
   delta_f_w -> LinearSystem2\u;
   Attenuate\output -> LimitDelta1\input;
   LinearSystem2\y -> Attenuate\input;
  end;
 implementation_end;
specification_end;
							specification 'testing'
 description '<Information><Description><Version>4.2</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct><member><name>svgFilename</name><value><string></string></value></member></struct></value></member></struct></Configuration></Description></Information>';
 type Submodel
  ports
   signal out delta_f;
   signal in delta_fl_w;
   signal in delta_fr_w;
   signal out delta_fl;
   signal out delta_fr;
   signal out delta_fl_s;
   signal out delta_fr_s;
   signal out delta_fr_o;
   signal out delta_fl_o;
 end;
 icon bg
  figures
   rectangle 353 272 431 304 color 0 fill 15132390;
   text 'name' 392 288 color 0;
  terminals
   delta_f 424 304 fixed;
   delta_fl_w 391.5 272 fixed;
   delta_fr_w 368 272 fixed;
   delta_fl 384 304 fixed;
   delta_fr 400 304 fixed;
   delta_fl_s 392 304 fixed;
   delta_fr_s 408 304 fixed;
   delta_fr_o 360 304 fixed;
   delta_fl_o 376 304 fixed;
 end;
 implementation bg
  submodels
   Differentiate 496 288
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Differentiate.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:9:46</TimeStamp>
</Description>';
    type 'Differentiate-Default'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 480 272 512 304 color 0 fill 15132390;
       text 'd/dt' 496 288 color 16711680 13 bold;
      end;
    end;
    implementation eq
parameters
	real initial = 0;		// initial value
equations
	output = ddt (input, initial);
    implementation_end;
   Differentiate1 464 64
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram\Differentiate.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:9:46</TimeStamp>
</Description>';
    type 'Differentiate-Default'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 448 48 480 80 color 0 fill 15132390;
       text 'd/dt' 464 64 color 16711680 13 bold;
      end;
    end;
    implementation eq
parameters
	real initial = 0;		// initial value
equations
	output = ddt (input, initial);
    implementation_end;
   encoder 556 344
    description '<Information><Description><Version>4.1</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type Submodel
     ports
      signal out encoder_pos_output;
      signal out encoder_speed_output;
      signal in speed_input;
      signal in angle_input;
    end;
    icon bg top
     figures
      rectangle 544 328 560 360 color 3344914 fill 0;
      rectangle 560 336 568 352 color 0 fill 0;
     terminals
      encoder_pos_output 552 360 fixed;
    end;
    implementation bg
     submodels
      AngleToLinearDistance 160 192
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144.1 176 175.9 208 color 0 fill 15132390;
         text 'K' 160 192 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_angle_resolution;
equations
	output = input * encoder_angle_resolution / (2 * pi);
    implementation_end;
      AngleToLinearDistance1 160 360
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144.1 344 175.9 376 color 0 fill 15132390;
         text 'K' 160 360 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_angle_resolution;
equations
	output = input *(2 * pi)  / encoder_angle_resolution;
    implementation_end;
      AngleToLinearDistance2 272 192
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256.1 176 287.9 208 color 0 fill 15132390;
         text 'K' 272 192 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_speed_resolution;
equations
	output = input * encoder_speed_resolution / (2 * pi);
    implementation_end;
      AngleToLinearDistance3 272 360
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256.1 344 287.9 376 color 0 fill 15132390;
         text 'K' 272 360 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_speed_resolution;
equations
	output = input *(2 * pi)  / encoder_speed_resolution;
    implementation_end;
      plug encoder_pos_output 160 440;
      plug encoder_speed_output 272 440;
      plug speed_input 272 120.1;
      plug angle_input 160 120.1;
      Quantisize 160 272
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Discrete\Quantize-Round.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:18:34</TimeStamp>
</Description>';
       type 'Quantize-Round'
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144 256 176 288 color 0 fill 15132390;
         group
          line 170.3 262.1 170.3 265.1 color 16711680;
          line 170.3 265.1 166.8 265.1 color 16711680;
          line 166.8 265.1 166.8 267.9 color 16711680;
          line 166.8 267.9 163.3 267.9 color 16711680;
          line 163.3 267.9 163.3 270.8 color 16711680;
          line 163.3 270.8 159.7 270.8 color 16711680;
          line 159.7 270.8 159.7 273.7 color 16711680;
          line 159.7 273.7 156.2 273.7 color 16711680;
          line 156.2 273.7 156.2 276.6 color 16711680;
          line 156.2 276.6 152.6 276.6 color 16711680;
          line 152.6 276.6 152.6 279.5 color 16711680;
          line 152.6 279.5 149 279.5 color 16711680;
          line 149 282.3 149 279.5 color 16711680;
         end;
       end;
       implementation eq
parameters
	real lsb = 1;
variables
	real q, half_lsb;
equations
	half_lsb = lsb / 2;
	q = if input < 0.0 then 
		input - half_lsb
	else
		input + half_lsb
	end;
	output =  q - (q mod lsb);
    implementation_end;
      Quantisize1 272 272
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Discrete\Quantize-Round.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:18:34</TimeStamp>
</Description>';
       type 'Quantize-Round'
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256 256 288 288 color 0 fill 15132390;
         group
          line 282.3 262.1 282.3 265.1 color 16711680;
          line 282.3 265.1 278.8 265.1 color 16711680;
          line 278.8 265.1 278.8 267.9 color 16711680;
          line 278.8 267.9 275.3 267.9 color 16711680;
          line 275.3 267.9 275.3 270.8 color 16711680;
          line 275.3 270.8 271.7 270.8 color 16711680;
          line 271.7 270.8 271.7 273.7 color 16711680;
          line 271.7 273.7 268.2 273.7 color 16711680;
          line 268.2 273.7 268.2 276.6 color 16711680;
          line 268.2 276.6 264.6 276.6 color 16711680;
          line 264.6 276.6 264.6 279.5 color 16711680;
          line 264.6 279.5 261 279.5 color 16711680;
          line 261 282.3 261 279.5 color 16711680;
         end;
       end;
       implementation eq
parameters
	real lsb = 1;
variables
	real q, half_lsb;
equations
	half_lsb = lsb / 2;
	q = if input < 0.0 then 
		input - half_lsb
	else
		input + half_lsb
	end;
	output =  q - (q mod lsb);
    implementation_end;
     end;
     connections
      angle_input -> AngleToLinearDistance\input;
      AngleToLinearDistance\output -> Quantisize\input;
      AngleToLinearDistance1\output -> encoder_pos_output;
      AngleToLinearDistance2\output -> Quantisize1\input;
      AngleToLinearDistance3\output -> encoder_speed_output;
      Quantisize\output -> AngleToLinearDistance1\input;
      Quantisize1\output -> AngleToLinearDistance3\input;
      speed_input -> AngleToLinearDistance2\input;
     end;
    implementation_end;
   encoder1 532 24
    description '<Information><Description><Version>4.1</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type Submodel
     ports
      signal out encoder_pos_output;
      signal out encoder_speed_output;
      signal in speed_input;
      signal in angle_input;
    end;
    icon bg top
     figures
      rectangle 520 8 536 40 color 3344914 fill 0;
      rectangle 536 16 544 32 color 0 fill 0;
     terminals
      encoder_pos_output 528 40 fixed;
    end;
    implementation bg
     submodels
      AngleToLinearDistance 160 192
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144.1 176 175.9 208 color 0 fill 15132390;
         text 'K' 160 192 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_angle_resolution;
equations
	output = input * encoder_angle_resolution / (2 * pi);
    implementation_end;
      AngleToLinearDistance1 160 360
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144.1 344 175.9 376 color 0 fill 15132390;
         text 'K' 160 360 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_angle_resolution;
equations
	output = input *(2 * pi)  / encoder_angle_resolution;
    implementation_end;
      AngleToLinearDistance2 272 192
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256.1 176 287.9 208 color 0 fill 15132390;
         text 'K' 272 192 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_speed_resolution;
equations
	output = input * encoder_speed_resolution / (2 * pi);
    implementation_end;
      AngleToLinearDistance3 272 360
       description '<Description>
 <Version>4.0</Version>
 <IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
 <LibraryPath>Signal\Block Diagram\Gain.emx</LibraryPath>
 <TimeStamp>2007-9-26 12:15:12</TimeStamp>
 <AllowLibraryUpdate>True</AllowLibraryUpdate>
</Description>';
       type Gain
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256.1 344 287.9 376 color 0 fill 15132390;
         text 'K' 272 360 color 16711680 16 bold;
       end;
       implementation eq
parameters
	real global encoder_speed_resolution;
equations
	output = input *(2 * pi)  / encoder_speed_resolution;
    implementation_end;
      plug encoder_pos_output 160 440;
      plug encoder_speed_output 272 440;
      plug speed_input 272 120.1;
      plug angle_input 160 120.1;
      Quantisize 160 272
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Discrete\Quantize-Round.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:18:34</TimeStamp>
</Description>';
       type 'Quantize-Round'
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 144 256 176 288 color 0 fill 15132390;
         group
          line 170.3 262.1 170.3 265.1 color 16711680;
          line 170.3 265.1 166.8 265.1 color 16711680;
          line 166.8 265.1 166.8 267.9 color 16711680;
          line 166.8 267.9 163.3 267.9 color 16711680;
          line 163.3 267.9 163.3 270.8 color 16711680;
          line 163.3 270.8 159.7 270.8 color 16711680;
          line 159.7 270.8 159.7 273.7 color 16711680;
          line 159.7 273.7 156.2 273.7 color 16711680;
          line 156.2 273.7 156.2 276.6 color 16711680;
          line 156.2 276.6 152.6 276.6 color 16711680;
          line 152.6 276.6 152.6 279.5 color 16711680;
          line 152.6 279.5 149 279.5 color 16711680;
          line 149 282.3 149 279.5 color 16711680;
         end;
       end;
       implementation eq
parameters
	real lsb = 1;
variables
	real q, half_lsb;
equations
	half_lsb = lsb / 2;
	q = if input < 0.0 then 
		input - half_lsb
	else
		input + half_lsb
	end;
	output =  q - (q mod lsb);
    implementation_end;
      Quantisize1 272 272
       description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Discrete\Quantize-Round.emx</LibraryPath>
  <TimeStamp>2007-9-27 15:18:34</TimeStamp>
</Description>';
       type 'Quantize-Round'
        ports
         signal in input;
         signal out output;
       end;
       icon bg bottom
        figures
         rectangle 256 256 288 288 color 0 fill 15132390;
         group
          line 282.3 262.1 282.3 265.1 color 16711680;
          line 282.3 265.1 278.8 265.1 color 16711680;
          line 278.8 265.1 278.8 267.9 color 16711680;
          line 278.8 267.9 275.3 267.9 color 16711680;
          line 275.3 267.9 275.3 270.8 color 16711680;
          line 275.3 270.8 271.7 270.8 color 16711680;
          line 271.7 270.8 271.7 273.7 color 16711680;
          line 271.7 273.7 268.2 273.7 color 16711680;
          line 268.2 273.7 268.2 276.6 color 16711680;
          line 268.2 276.6 264.6 276.6 color 16711680;
          line 264.6 276.6 264.6 279.5 color 16711680;
          line 264.6 279.5 261 279.5 color 16711680;
          line 261 282.3 261 279.5 color 16711680;
         end;
       end;
       implementation eq
parameters
	real lsb = 1;
variables
	real q, half_lsb;
equations
	half_lsb = lsb / 2;
	q = if input < 0.0 then 
		input - half_lsb
	else
		input + half_lsb
	end;
	output =  q - (q mod lsb);
    implementation_end;
     end;
     connections
      angle_input -> AngleToLinearDistance\input;
      AngleToLinearDistance\output -> Quantisize\input;
      AngleToLinearDistance1\output -> encoder_pos_output;
      AngleToLinearDistance2\output -> Quantisize1\input;
      AngleToLinearDistance3\output -> encoder_speed_output;
      Quantisize\output -> AngleToLinearDistance1\input;
      Quantisize1\output -> AngleToLinearDistance3\input;
      speed_input -> AngleToLinearDistance2\input;
     end;
    implementation_end;
   Limit 576 160
    description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Block Diagram Non-Linear\SignalLimiter-Limit.emx</LibraryPath>
  <TimeStamp>2007-9-26 12:47:40</TimeStamp>
</Description>';
    type 'SignalLimiter-Limit'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 560 144 592 176 color 0 fill 15132390;
       line 575.9 148.5 575.9 173 color 0 fill 15132390;
       line 563 160.2 588.7 160.2 color 0 fill 15132390;
       spline 569.9 167.1 581.9 153.4 color 16711680 fill 15132390 width 2;
       spline 581.3 154.2 589.9 153.8 color 16711680 fill 15132390 width 2;
       spline 563 167.6 569.9 167.1 color 16711680 fill 15132390 width 2;
      end;
    end;
    implementation eq
parameters
	real maximum = 1.31;
	real minimum = -1.31;
equations
	output = limit (input, minimum, maximum);
  implementation_end;
   Limit_left 160 24
    description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram Non-Linear\SignalLimiter-Limit.emx</LibraryPath><TimeStamp>2007-9-26 12:47:40</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type 'SignalLimiter-Limit'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 144 8 176 40 color 0 fill 15132390;
       line 159.9 12.5 159.9 37 color 0 fill 15132390;
       line 147 24.2 172.7 24.2 color 0 fill 15132390;
       spline 153.9 31.1 165.9 17.4 color 16711680 fill 15132390 width 2;
       spline 165.3 18.2 173.9 17.8 color 16711680 fill 15132390 width 2;
       spline 147 31.6 153.9 31.1 color 16711680 fill 15132390 width 2;
      end;
    end;
    implementation eq
parameters
	real maximum = 1.31;
	real minimum = -1.31;
equations
	output = limit (input, minimum, maximum);
  implementation_end;
   Limit_right 168 304
    description '<Information><Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><LibraryPath>Signal\Block Diagram Non-Linear\SignalLimiter-Limit.emx</LibraryPath><TimeStamp>2007-9-26 12:47:40</TimeStamp><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type 'SignalLimiter-Limit'
     ports
      signal in input;
      signal out output;
    end;
    icon bg bottom
     figures
      group
       rectangle 152 288 184 320 color 0 fill 15132390;
       line 167.9 292.5 167.9 317 color 0 fill 15132390;
       line 155 304.2 180.7 304.2 color 0 fill 15132390;
       spline 161.9 311.1 173.9 297.4 color 16711680 fill 15132390 width 2;
       spline 173.3 298.2 181.9 297.8 color 16711680 fill 15132390 width 2;
       spline 155 311.6 161.9 311.1 color 16711680 fill 15132390 width 2;
      end;
    end;
    implementation eq
parameters
	real maximum = 1.31;
	real minimum = -1.31;
equations
	output = limit (input, minimum, maximum);
  implementation_end;
   plug delta_fr_s 680 320;
   plug delta_fl_o 680 120;
   plug delta_fl_s 672 24;
   plug delta_fr 672 360;
   plug delta_f 679.9 160;
   plug delta_fl 664 40;
   plug delta_fr_w 80.1 304;
   plug delta_fl_w 72 24;
   plug delta_fr_o 680 240;
   Splitter1 368 24
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 364.8 20.8 371.2 27.2 color -1 fill 0;
      ellipse 363.7 19.7 372.3 28.3 color -1;
     terminals
      input 368 24 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Splitter2 392 304
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 388.8 300.8 395.2 307.2 color -1 fill 0;
      ellipse 387.7 299.7 396.3 308.3 color -1;
     terminals
      input 392 304 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Splitter3 384 120
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 380.8 116.8 387.2 123.2 color -1 fill 0;
      ellipse 379.7 115.7 388.3 124.3 color -1;
     terminals
      input 384 120 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   Splitter4 392 240
    description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
    knot Splitter
     ports
      signal knot duplicatable out output [1];
      signal knot in input [1];
    end;
    icon bg ellipse
     figures
      ellipse 388.8 236.8 395.2 243.2 color -1 fill 0;
      ellipse 387.7 235.7 396.3 244.3 color -1;
     terminals
      input 392 240 fixed;
    end;
    implementation eq
equations
    collect (output) = input;
implementation_end;
   steering 480 159.7
    description '<Information><Description><Version>4.0</Version><LibraryPath>C:\Program Files\20-sim 4.0\System\Submodel.emx</LibraryPath><TimeStamp>2007-10-31 11:32:54</TimeStamp><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues><AllowLibraryUpdate>True</AllowLibraryUpdate><Configuration><struct><member><name>DocumentationMask</name><value><struct></struct></value></member></struct></Configuration></Description></Information>';
    type Submodel
     ports
      signal in delta_fl;
      signal in delta_fr;
      signal out delta_f;
    end;
    implementation eq
equations
delta_f = (delta_fl+delta_fr)/2;implementation_end;
   TransferFunction 280 24
			specifications active 'FO'
				specification 'FO'
 description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 256 7.4 304 40.6 color 0 fill 15132390;
   text 'k' 281.1 15.1 color 16711680 14;
   line 261.7 25 299.4 25 color 16711680 fill 15132390;
   text 't' 274.7 31.7 color 16711680 'SymbolProp BT' 15;
   text 's    + 1' 280 31.7 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;		// gain []
    real tau = 0.2;		// time constant [s / rad]
variables
    real rate, state;
equations
    rate = (k * input - state) / tau;
    state = int(rate);
    output = state;                    implementation_end;
specification_end;
				specification 'FOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96 216 128 fill 15132390;
   group
    text 't' 176.5 118.8 color 16711680 'SymbolProp BT' 15;
    text 's    + 1' 184 118.8 color 16711680 14;
   end;
   line 155.5 114 210.9 114 color 16711680 fill 15132390;
   group
    text 'L' 187.2 108.2 color 16711680 11;
    text 't' 181.3 105 color 16711680 'SymbolProp BT' 15;
   end;
   text 'k' 160.5 105.5 color 16711680 14;
   text '(s    + 1)' 188.8 105 color 16711680 14;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lead time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tau );
	output = state + ( tauL/tau ) * rate;  implementation_end;
specification_end;
				specification 'FOLA'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96.5 216 128.5 fill 15132390;
   line 156.6 113.5 211.9 113.5 color 16711680 fill 15132390;
   group
    text 'k' 160.5 105 color 16711680 14;
    text '(s    + 1)' 187.7 104.4 color 16711680 14;
    text 't' 180.3 104.4 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text 's    + 1' 182.4 119.4 color 16711680 14;
    text 't' 173.9 119.4 color 16711680 'SymbolProp BT' 15;
    text 'L' 179.7 122.6 color 16711680 11;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lag time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tauL );
	output = state + ( tau/tauL ) * rate;  implementation_end;
specification_end;
				specification 'SOI'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 160 97 208 128 fill 15132390;
   text 'k' 187.2 104 color 16711680 14;
   line 163.2 112.5 202.7 112.5 color 16711680 fill 15132390;
   group
    text 's(s  + 1)' 184 118.4 color 16711680 14;
    text 't' 181.9 118.4 color 16711680 'SymbolProp BT' 15;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
 	real tau = 1;		// time constant [s / rad]
variables
    real hidden rate1, state1;
    real rate2,state2;
equations
	rate1 = ( k * input );
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau;
	state2 = int(rate2);
	output = state2;                        implementation_end;
specification_end;
				specification 'SOO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.6 232 128.6 fill 15132390;
   group
    text 't' 198.4 117.9 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.1 color 16711680 11;
   end;
   group
    text 't' 153.6 117.9 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.1 color 16711680 11;
   end;
   line 140.8 112.1 226.1 112.1 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 117.9 color 16711680 14;
   text '(s    + 1)' 205.9 117.9 color 16711680 14;
   text 'k' 183.5 103.3 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s / rad]
	real tau2 = 1;		// time constant 2 [s / rad]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state1) / tau1;
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau2;
	state2 = int(rate2);
	output = state2;                         implementation_end;
specification_end;
				specification 'SOOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 97.3 232 129.3 fill 15132390;
   group
    text 't' 198.4 118.1 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.3 color 16711680 11;
   end;
   group
    text 't' 153.6 118.1 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.2 color 16711680 11;
   end;
   text 'k' 159.5 103.7 color 16711680 14;
   line 140.8 112.2 226.1 112.2 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 118.1 color 16711680 14;
   text '(s    + 1)' 205.9 118.1 color 16711680 14;
   group
    text '(s    + 1)' 187.7 103.7 color 16711680 14;
    text 't' 180.3 103.7 color 16711680 'SymbolProp BT' 15;
    text 'L' 185.1 106.9 color 16711680 11;
   end;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s ]
	real tau2 = 1;		// time constant 2 [s ]
	real tauL = 2;		// lead time [s]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = state2/k - input;
	state1 = int (rate1);
	rate2 = k/(tau1*tau2) * ( tauL*input - state1 - state2*(tau1+tau2)/k );
	state2 = int(rate2);
	output = state2;             implementation_end;
specification_end;
				specification 'SOU'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2011-3-23 10:32:13</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 200 511.7 296 543.7 fill 15132390;
   line 204.8 527.2 290.1 527.2 color 16711680 fill 15132390;
   text 's  + 2     s  + 1' 254.3 535.7 color 16711680 14;
   text 'z' 251.4 536.8 color 16711680 'SymbolProp BT' 11 symbol;
   text '2' 216.4 532 color 16711680 11;
   text 't' 210 535.7 color 16711680 'SymbolProp BT' 15;
   text 't' 258.5 535.7 color 16711680 'SymbolProp BT' 15;
   text 'k' 248.4 519.2 color 16711680 14;
   text '2' 228.4 532 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1;			// gain []
    	real tau = 1;		// time constant [s ]
	real zeta = 0.7;		// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2) / tau;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)/tau;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
				specification 'SOUO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.1 232 128.1 fill 15132390;
   line 139.2 112.4 227.2 112.4 color 16711680 fill 15132390;
   text 's  + 2      s  + ' 176 120.1 color 16711680 14;
   text 'z' 172.3 121.2 color 16711680 'SymbolProp BT' 11 symbol;
   text 'w' 181.3 120.1 color 16711680 'SymbolProp BT' 15;
   text 'k' 176.5 103.6 color 16711680 14;
   group
    text '2' 194.7 101.2 color 16711680 11;
    text 'w' 186.7 103.9 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text '2' 225.6 116.7 color 16711680 11;
    text 'w' 217.6 119.4 color 16711680 'SymbolProp BT' 15;
   end;
   text '2' 149.3 116.2 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1.0;			// gain []
	real omega = 1.0;		// frequency [rad/s]
	real zeta = 0.7;			// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2)*omega;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)*omega;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
			end;
   TransferFunction1 288 304
			specifications active 'FO'
				specification 'FO'
 description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 264 287.4 312 320.6 color 0 fill 15132390;
   text 'k' 289.1 295.1 color 16711680 14;
   line 269.7 305 307.4 305 color 16711680 fill 15132390;
   text 't' 282.7 311.7 color 16711680 'SymbolProp BT' 15;
   text 's    + 1' 288 311.7 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;		// gain []
    real tau = 0.2;		// time constant [s / rad]
variables
    real rate, state;
equations
    rate = (k * input - state) / tau;
    state = int(rate);
    output = state;                    implementation_end;
specification_end;
				specification 'FOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96 216 128 fill 15132390;
   group
    text 't' 176.5 118.8 color 16711680 'SymbolProp BT' 15;
    text 's    + 1' 184 118.8 color 16711680 14;
   end;
   line 155.5 114 210.9 114 color 16711680 fill 15132390;
   group
    text 'L' 187.2 108.2 color 16711680 11;
    text 't' 181.3 105 color 16711680 'SymbolProp BT' 15;
   end;
   text 'k' 160.5 105.5 color 16711680 14;
   text '(s    + 1)' 188.8 105 color 16711680 14;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lead time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tau );
	output = state + ( tauL/tau ) * rate;  implementation_end;
specification_end;
				specification 'FOLA'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 152 96.5 216 128.5 fill 15132390;
   line 156.6 113.5 211.9 113.5 color 16711680 fill 15132390;
   group
    text 'k' 160.5 105 color 16711680 14;
    text '(s    + 1)' 187.7 104.4 color 16711680 14;
    text 't' 180.3 104.4 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text 's    + 1' 182.4 119.4 color 16711680 14;
    text 't' 173.9 119.4 color 16711680 'SymbolProp BT' 15;
    text 'L' 179.7 122.6 color 16711680 11;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
	real tau = 1;		// time constant [s ]
	real tauL = 1;		// lag time [s]
variables
    real hidden rate, state;
equations
	rate = ( k * input - state );
	state = int ( rate / tauL );
	output = state + ( tau/tauL ) * rate;  implementation_end;
specification_end;
				specification 'SOI'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 160 97 208 128 fill 15132390;
   text 'k' 187.2 104 color 16711680 14;
   line 163.2 112.5 202.7 112.5 color 16711680 fill 15132390;
   group
    text 's(s  + 1)' 184 118.4 color 16711680 14;
    text 't' 181.9 118.4 color 16711680 'SymbolProp BT' 15;
   end;
 end;
 implementation eq
parameters
	real k = 1;			// gain []
 	real tau = 1;		// time constant [s / rad]
variables
    real hidden rate1, state1;
    real rate2,state2;
equations
	rate1 = ( k * input );
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau;
	state2 = int(rate2);
	output = state2;                        implementation_end;
specification_end;
				specification 'SOO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.6 232 128.6 fill 15132390;
   group
    text 't' 198.4 117.9 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.1 color 16711680 11;
   end;
   group
    text 't' 153.6 117.9 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.1 color 16711680 11;
   end;
   line 140.8 112.1 226.1 112.1 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 117.9 color 16711680 14;
   text '(s    + 1)' 205.9 117.9 color 16711680 14;
   text 'k' 183.5 103.3 color 16711680 14;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s / rad]
	real tau2 = 1;		// time constant 2 [s / rad]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state1) / tau1;
	state1 = int (rate1);
	rate2 = (state1 - state2)/tau2;
	state2 = int(rate2);
	output = state2;                         implementation_end;
specification_end;
				specification 'SOOL'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 97.3 232 129.3 fill 15132390;
   group
    text 't' 198.4 118.1 color 16711680 'SymbolProp BT' 15;
    text '2' 203.2 121.3 color 16711680 11;
   end;
   group
    text 't' 153.6 118.1 color 16711680 'SymbolProp BT' 15;
    text '1' 157.9 120.2 color 16711680 11;
   end;
   text 'k' 159.5 103.7 color 16711680 14;
   line 140.8 112.2 226.1 112.2 color 16711680 fill 15132390;
   text '(s    + 1)' 161.1 118.1 color 16711680 14;
   text '(s    + 1)' 205.9 118.1 color 16711680 14;
   group
    text '(s    + 1)' 187.7 103.7 color 16711680 14;
    text 't' 180.3 103.7 color 16711680 'SymbolProp BT' 15;
    text 'L' 185.1 106.9 color 16711680 11;
   end;
 end;
 implementation eq
parameters
    real k = 1;			// gain []
    real tau1 = 1;		// time constant 1 [s ]
	real tau2 = 1;		// time constant 2 [s ]
	real tauL = 2;		// lead time [s]
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = state2/k - input;
	state1 = int (rate1);
	rate2 = k/(tau1*tau2) * ( tauL*input - state1 - state2*(tau1+tau2)/k );
	state2 = int(rate2);
	output = state2;             implementation_end;
specification_end;
				specification 'SOU'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2011-3-23 10:32:13</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 200 511.7 296 543.7 fill 15132390;
   line 204.8 527.2 290.1 527.2 color 16711680 fill 15132390;
   text 's  + 2     s  + 1' 254.3 535.7 color 16711680 14;
   text 'z' 251.4 536.8 color 16711680 'SymbolProp BT' 11 symbol;
   text '2' 216.4 532 color 16711680 11;
   text 't' 210 535.7 color 16711680 'SymbolProp BT' 15;
   text 't' 258.5 535.7 color 16711680 'SymbolProp BT' 15;
   text 'k' 248.4 519.2 color 16711680 14;
   text '2' 228.4 532 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1;			// gain []
    	real tau = 1;		// time constant [s ]
	real zeta = 0.7;		// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2) / tau;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)/tau;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
				specification 'SOUO'
description '<Description><Version>4.0</Version><IsMainModel>1</IsMainModel><KeepParameterValues>False</KeepParameterValues>
   <LibraryPath>Signal\Transfer Functions\TransferFunction.emx</LibraryPath>
  <TimeStamp>2008-1-24 10:10:10</TimeStamp>
</Description>';
 type TransferFunction
  ports
   signal in input;
   signal out output;
 end;
 icon bg bottom
  figures
   rectangle 136 96.1 232 128.1 fill 15132390;
   line 139.2 112.4 227.2 112.4 color 16711680 fill 15132390;
   text 's  + 2      s  + ' 176 120.1 color 16711680 14;
   text 'z' 172.3 121.2 color 16711680 'SymbolProp BT' 11 symbol;
   text 'w' 181.3 120.1 color 16711680 'SymbolProp BT' 15;
   text 'k' 176.5 103.6 color 16711680 14;
   group
    text '2' 194.7 101.2 color 16711680 11;
    text 'w' 186.7 103.9 color 16711680 'SymbolProp BT' 15;
   end;
   group
    text '2' 225.6 116.7 color 16711680 11;
    text 'w' 217.6 119.4 color 16711680 'SymbolProp BT' 15;
   end;
   text '2' 149.3 116.2 color 16711680 11;
 end;
 implementation eq
parameters
    	real k = 1.0;			// gain []
	real omega = 1.0;		// frequency [rad/s]
	real zeta = 0.7;			// damping constant []
variables
    	real hidden rate1,rate2, state1;
	real state2;
equations
	rate1 = (k * input - state2)*omega;
	state1 = int (rate1);
	rate2 = (state1 - 2*zeta*state2)*omega;
	state2 = int(rate2);
	output = state2;                            implementation_end;
specification_end;
			end;
  end;
  connections
   delta_fl_w -> Limit_left\input;
   delta_fr_w -> Limit_right\input;
   Differentiate\output -> encoder\speed_input;
   Differentiate1\output -> encoder1\speed_input;
   encoder\encoder_pos_output -> delta_fr;
   encoder\encoder_speed_output -> delta_fr_s 584 320;
   encoder1\encoder_pos_output -> delta_fl;
   encoder1\encoder_speed_output -> delta_fl_s;
   Limit_left\output -> TransferFunction\input;
   Limit_right\output -> TransferFunction1\input;
   Limit\output -> delta_f;
   Splitter1\output -> Differentiate1\input;
   Splitter1\output -> encoder1\angle_input;
   Splitter1\output -> Splitter3\input;
   Splitter2\output -> Differentiate\input;
   Splitter2\output -> encoder\angle_input 392 344;
   Splitter2\output -> Splitter4\input;
   Splitter3\output -> delta_fl_o;
   Splitter3\output -> steering\delta_fl 392 160;
   Splitter4\output -> delta_fr_o 400 240;
   Splitter4\output -> steering\delta_fr 392 192 392 160;
   steering\delta_f -> Limit\input;
   TransferFunction\output -> Splitter1\input;
   TransferFunction1\output -> Splitter2\input;
  end;
 implementation_end;
specification_end;
						end;
      Splitter1 624 344
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 620.8 340.8 627.2 347.2 color -1 fill 0;
         ellipse 619.7 339.7 628.3 348.3 color -1;
        terminals
         input 624 344 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter2 424 424
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 420.8 420.8 427.2 427.2 color -1 fill 0;
         ellipse 419.7 419.7 428.3 428.3 color -1;
        terminals
         input 424 424 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
      Splitter3 392 240
       description '<Description><Version>4.0</Version>
   <LibraryPath>Signal\Block Diagram\Splitter.emx</LibraryPath>
  <TimeStamp>2008-01-17 11:28:29</TimeStamp>
<IsMainModel>1</IsMainModel>
 <KeepParameterValues>False</KeepParameterValues>
</Description>';
       knot Splitter
        ports
         signal knot duplicatable out output [1];
         signal knot in input [1];
       end;
       icon bg ellipse
        figures
         ellipse 388.8 236.8 395.2 243.2 color -1 fill 0;
         ellipse 387.7 235.7 396.3 244.3 color -1;
        terminals
         input 392 240 fixed;
       end;
       implementation eq
equations
    collect (output) = input;
implementation_end;
     end;
     connections
      BicycleModel\d_x_v -> PosCalc\Vx;
      BicycleModel\d_y_v -> PosCalc\Vy;
      BicycleModel\r -> PosCalc\r;
      delta_w -> Splitter3\input;
      motor\u_r -> BicycleModel\u_r;
      motor\w_l_o -> w_l_o 696 288;
      motor\w_l_p -> w_l_p 552 288;
      motor\w_l_s -> w_l_s 584 288;
      motor\w_o -> w_o;
      motor\w_r_o -> w_r_o 744 288;
      motor\w_r_p -> w_r_p 616 288;
      motor\w_r_s -> w_r_s 648 288;
      PosCalc\r_a -> Splitter1\input;
      PosCalc\theta -> theta;
      PosCalc\x -> x;
      PosCalc\y -> y;
      pvg_actuator\delta_f -> Splitter2\input;
      pvg_actuator\delta_fl -> delta_fl 384 360;
      pvg_actuator\delta_fl_o -> delta_fl_o 376 328;
      pvg_actuator\delta_fl_s -> delta_fl_s 392 376;
      pvg_actuator\delta_fr -> delta_fr 400 392;
      pvg_actuator\delta_fr_o -> delta_fr_o 360 312;
      pvg_actuator\delta_fr_s -> delta_fr_s 408 408;
      Splitter1\output -> motor\r_a 520 344;
      Splitter1\output -> r_a;
      Splitter2\output -> BicycleModel\delta_f;
      Splitter2\output -> delta_f;
      Splitter3\output -> pvg_actuator\delta_fl_w;
      Splitter3\output -> pvg_actuator\delta_fr_w;
      u_r -> motor\u_r_w;
     end;
    implementation_end;
  end;
  connections
   controller\speed -> vehicle\u_r;
   vehicle\delta_w <- controller\delta_fl;
   vehicle\theta -> controller\theta 280 96;
   vehicle\x -> controller\x 312 80;
   vehicle\y -> controller\y 296 88;
  end;
 implementation_end;
]]>
</Sidops>
 </Model>
 <Experiments>
     <DefaultExperiment><![CDATA[Experiment 1]]>
</DefaultExperiment>
  <Experiment>
    <Name>Experiment 1</Name>
    <CreatedBy></CreatedBy>
    <Info></Info>
<ExpData>
  <VersionNumber>4.6</VersionNumber>
  <ModelProperties>
    <ModelProperty section="tools\graph editor" entry="showGrid" value="0"/>
    <ModelProperty section="CCodeDialog" entry="SubmodelName" value="vehicle"/>
    <ModelProperty section="CCodeDialog" entry="TargetName" value="FMU 2.0 export for 20-sim submodel (GitHub)"/>
    <ModelProperty section="CCodeDialog" entry="TargetDirectory" value="C:\Users\Frederik\Desktop\Pilot_Study\Models\vehicle"/>
  </ModelProperties>
  <Variables>
   <Constants>
   </Constants>
   <Parameters>
    <Variable>
     <Name>Control_Parameters</Name>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>w</Name>
     <Value>0.74</Value>
    </Variable>
   </Parameters>
   <Initials>
    <Variable>
     <Name>vehicle\motor\TransferFunction\state_initial</Name>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>vehicle\pvg_actuator\TransferFunction1\state_initial</Name>
     <Value>0</Value>
    </Variable>
    <Variable>
     <Name>vehicle\pvg_actuator\TransferFunction\state_initial</Name>
     <Value>0</Value>
    </Variable>
   </Initials>
  </Variables>
  <PlotSpecs>
   <VarNames>
    <VarName>time</VarName>
    <VarName>controller\y</VarName>
    <VarName>controller\x</VarName>
    <VarName>vehicle\PosCalc\temp_y</VarName>
    <VarName>vehicle\PosCalc\temp_x</VarName>
   </VarNames>
   <Plots>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>1</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model(1)</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>-1.5</Minimum>
       <Maximum>3.5</Maximum>
       <Linear>true</Linear>
       <Scaling>2</Scaling>
       <Label>x</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-1.5</Minimum>
       <Maximum>3.5</Maximum>
       <Linear>true</Linear>
       <Scaling>2</Scaling>
       <Label>y</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711935</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711935</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>controller\x</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>controller\y</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
    <Plot>
     <PlotType>GraphPlot</PlotType>
     <BasePlot>
       <PlotId>2</PlotId>
       <UseWindowsBGColor>true</UseWindowsBGColor>
       <BGColor>15790320</BGColor>
       <PlotIsVisible>true</PlotIsVisible>
     </BasePlot>
     <Grid>
      <DrawGrid>true</DrawGrid>
      <GridColor>15780518</GridColor>
      <XTicks>10</XTicks>
      <YTicks>10</YTicks>
      <ZTicks>10</ZTicks>
      <Use3DLook>false</Use3DLook>
     </Grid>
     <PlotBGColor>16777215</PlotBGColor>
     <ShowPlotTitle>true</ShowPlotTitle>
     <TitlePosition>1</TitlePosition>
     <PlotTitle>model</PlotTitle>
     <ShowXValues>true</ShowXValues>
     <Fonts>
      <TitleFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </TitleFont>
      <LabelFont>
       <Name>Arial</Name>
       <Height>12</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </LabelFont>
      <ValuesFont>
       <Name>Arial</Name>
       <Height>10</Height>
       <PitchFamily>34</PitchFamily>
       <Weight>400</Weight>
       <Italic>0</Italic>
       <UnderLine>0</UnderLine>
       <StrikeOut>0</StrikeOut>
       <Color>0</Color>
      </ValuesFont>
     </Fonts>
     <SharedXAxis>true</SharedXAxis>
     <SharedYAxis>true</SharedYAxis>
     <SharedZAxis>false</SharedZAxis>
     <XAxes>
      <Axis>
       <Minimum>-0.955261533085176</Minimum>
       <Maximum>3.23062872684761</Maximum>
       <Linear>true</Linear>
       <Scaling>3</Scaling>
       <Label>temp_x</Label>
      </Axis>
     </XAxes>
     <YAxes>
      <Axis>
       <Minimum>-1.5</Minimum>
       <Maximum>3.5</Maximum>
       <Linear>true</Linear>
       <Scaling>1</Scaling>
       <Label>temp_y</Label>
      </Axis>
     </YAxes>
     <ZAxes>
     </ZAxes>
     <Curves>
      <Curve>
       <LineColor>16711680</LineColor>
       <LineStyle>1</LineStyle>
       <TickColor>16711680</TickColor>
       <TickStyle>0</TickStyle>
       <CurveVisible>true</CurveVisible>
       <PixelThresshold>1</PixelThresshold>
       <LineThickness>1</LineThickness>
       <LineOrder>1</LineOrder>
       <ShowYValues>true</ShowYValues>
       <XCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>vehicle\PosCalc\temp_x</VarName>
       </XCurveData>
       <YCurveData>
        <ShowUnit>true</ShowUnit>
        <VarName>vehicle\PosCalc\temp_y</VarName>
       </YCurveData>
      </Curve>
     </Curves>
     <Legenda>
      <ShowLegenda>true</ShowLegenda>
     </Legenda>
    </Plot>
   </Plots>
   <PlotPanels>
    <PlotPanel>
     <PlotPanelId>1</PlotPanelId>
     <PlotPanelVisible>true</PlotPanelVisible>
     <Name>Window 1</Name>
     <Tiling>2</Tiling>
     <PlotIds>
       <PlotId>1</PlotId>
       <PlotId>2</PlotId>
     </PlotIds>
     <ToggleState>StripChart</ToggleState>
    </PlotPanel>
   </PlotPanels>
   <WindowRectangles virtualDesktopWidth="3840" virtualDesktopHeight="1080">
     <WindowRectangle monitor="0" left="0" top="0" right="1920" bottom="1080" plotpanelid="1">
-0.00416667 -0.00740741 1.00417 1.0037
     </WindowRectangle>
   </WindowRectangles>
  </PlotSpecs>
  <RunSpecs>
   <SimulatorSettings>
    <StartTime>0</StartTime>
    <FinishTime>40</FinishTime>
    <Warp>false</Warp>
    <UseOutputAfterEach>false</UseOutputAfterEach>
    <OutputAfterEach>0.1</OutputAfterEach>
    <EventEpsilon>1e-006</EventEpsilon>
    <AlgebraicTolerance>1e-007</AlgebraicTolerance>
    <SteadyStateAnalysis>false</SteadyStateAnalysis>
    <UpdateHoldInstructions>true</UpdateHoldInstructions>
   </SimulatorSettings>
   <IntegrationMethods>
    <IntegrationMethod>
     <Name>Euler</Name>
     <StepSize>0.001</StepSize>
     <AutoStepSize>false</AutoStepSize>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>BackwardEuler</Name>
     <AbsoluteTolerance>1e-005</AbsoluteTolerance>
     <RelativeTolerance>1e-005</RelativeTolerance>
     <AlgebraicAbsoluteTolerance>1e-005</AlgebraicAbsoluteTolerance>
     <AlgebraicRelativeTolerance>1e-005</AlgebraicRelativeTolerance>
     <StepSize>0.01</StepSize>
     <Alpha>1</Alpha>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>AdamsBashforth</Name>
     <StepSize>0.01</StepSize>
     <AutoStepSize>false</AutoStepSize>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>RungeKutta2</Name>
     <StepSize>0.01</StepSize>
     <AutoStepSize>false</AutoStepSize>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>RungeKutta4</Name>
     <StepSize>0.001</StepSize>
     <AutoStepSize>false</AutoStepSize>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>RungeKutta8</Name>
     <UseInitialStepSize>false</UseInitialStepSize>
     <InitialStepSize>0</InitialStepSize>
     <UseMaximumStepSize>false</UseMaximumStepSize>
     <MaximumStepSize>0</MaximumStepSize>
     <AbsoluteTolerance>1e-006</AbsoluteTolerance>
     <RelativeTolerance>1e-006</RelativeTolerance>
     <SafetyFactor>0.9</SafetyFactor>
     <Factor1>0.33</Factor1>
     <Factor2>6</Factor2>
     <Beta>0</Beta>
     <UseMaxNrSteps>false</UseMaxNrSteps>
     <MaxNrSteps>100000</MaxNrSteps>
     <UseStiffDetection>false</UseStiffDetection>
     <MaxNrStiffnessSteps>1000</MaxNrStiffnessSteps>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>RungeKuttaFehlberg</Name>
     <UseInitialStepSize>false</UseInitialStepSize>
     <InitialStepSize>0</InitialStepSize>
     <UseMaximumStepSize>false</UseMaximumStepSize>
     <MaximumStepSize>0</MaximumStepSize>
     <AbsoluteTolerance>1e-006</AbsoluteTolerance>
     <RelativeTolerance>1e-006</RelativeTolerance>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>VodeAdams</Name>
     <UseInitialStepSize>false</UseInitialStepSize>
     <InitialStepSize>0</InitialStepSize>
     <UseMaximumStepSize>false</UseMaximumStepSize>
     <MaximumStepSize>0</MaximumStepSize>
     <AbsoluteTolerance>1e-006</AbsoluteTolerance>
     <RelativeTolerance>1e-006</RelativeTolerance>
     <VodeUseBDF>true</VodeUseBDF>
     <VodeUseNewton>true</VodeUseNewton>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>BDFMethod</Name>
     <AbsoluteTolerance>1e-005</AbsoluteTolerance>
     <RelativeTolerance>1e-005</RelativeTolerance>
     <AlgebraicAbsoluteTolerance>1e-005</AlgebraicAbsoluteTolerance>
     <AlgebraicRelativeTolerance>1e-005</AlgebraicRelativeTolerance>
     <UseInitialStepSize>false</UseInitialStepSize>
     <InitialStepSize>0</InitialStepSize>
     <UseMaximumStepSize>false</UseMaximumStepSize>
     <MaximumStepSize>0</MaximumStepSize>
     <UseFixedStepSize>false</UseFixedStepSize>
     <FixedStepSize>0</FixedStepSize>
    </IntegrationMethod>
    <IntegrationMethod>
     <Name>MeBDFiMethod</Name>
     <AbsoluteTolerance>1e-005</AbsoluteTolerance>
     <RelativeTolerance>1e-005</RelativeTolerance>
     <AlgebraicAbsoluteTolerance>1e-005</AlgebraicAbsoluteTolerance>
     <AlgebraicRelativeTolerance>1e-005</AlgebraicRelativeTolerance>
     <UseInitialStepSize>false</UseInitialStepSize>
     <InitialStepSize>0</InitialStepSize>
     <UseMaximumStepSize>false</UseMaximumStepSize>
     <MaximumStepSize>0</MaximumStepSize>
     <UseFixedStepSize>false</UseFixedStepSize>
     <FixedStepSize>0</FixedStepSize>
    </IntegrationMethod>
    <SelectedIntegrationMethod>4</SelectedIntegrationMethod>
   </IntegrationMethods>
  </RunSpecs>
  <MultipleRun>
   <NrSteps>10</NrSteps>
   <CopyFromStates>false</CopyFromStates>
   <JoinParameterVariation>true</JoinParameterVariation>
   <ClearAfterRun>true</ClearAfterRun>
   <RedrawAfterRun>false</RedrawAfterRun>
   <DrawDuringSimulation>true</DrawDuringSimulation>
   <ActionBeforeOptimization>0</ActionBeforeOptimization>
   <CompareValue>0</CompareValue>
   <UseCompareValue>true</UseCompareValue>
   <MultipleRunType>MultipleRun</MultipleRunType>
   <Minimize>true</Minimize>
   <OptimizationVariable></OptimizationVariable>
   <ResulVarUsage>UseEndValue</ResulVarUsage>
   <Tolerance>0.001</Tolerance>
   <OptimizationMethod>BroydonFletcherGoldfarbShanno</OptimizationMethod>
   <MultipleRunVariables>
   </MultipleRunVariables>
  </MultipleRun>
  <ExportData>
   <WriteAsText>true</WriteAsText>
   <ReadAsText>true</ReadAsText>
   <WriteHeader>true</WriteHeader>
   <ReadHeader>true</ReadHeader>
   <ReadFilename></ReadFilename>
   <WriteFilename></WriteFilename>
   <DoWrite>false</DoWrite>
   <ExportVariables>
   </ExportVariables>
   <ImportVariables>
   </ImportVariables>
  </ExportData>
  <BreakPoints>
  </BreakPoints>
  <AnimationPlayback>
   <PlaybackSpeed>1</PlaybackSpeed>
  </AnimationPlayback>
</ExpData>
  </Experiment>
</Experiments>
</Document>
